# –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (analytics)

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–∞—è —á–∞—Å—Ç—å –°–µ—Ä–≤–∏—Å–∞ –º–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ ‚Äî —ç—Ç–æ –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–µ Vite, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ:

- –ó–∞–≥—Ä—É–∑–∫—É CSV-—Ç–∞–±–ª–∏—Ü
    
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
    
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∑–æ–∫

üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```plaintext
analytics/
‚îú‚îÄ‚îÄ public/            # —Å—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.html     # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ assets/        # SVG-–∏–∫–æ–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ components/    # –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CloseButton/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DoneButton/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Modal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResultDisplay/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Spinner/
‚îÇ   ‚îú‚îÄ‚îÄ features/      # —Å—Ç—Ä–∞–Ω–∏—Ü—ã-—Ñ–∏—á–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Aggregator/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Generator/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ History/
‚îÇ   ‚îú‚îÄ‚îÄ services/      # API-—Å–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ store/         # Zustand-—Å—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ types/         # TS-—Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/         # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx        # –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx       # —Ä–µ–Ω–¥–µ—Ä React
‚îÇ   ‚îî‚îÄ‚îÄ index.css      # –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ vite.config.ts     # –∫–æ–Ω—Ñ–∏–≥ —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ package.json       # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ tsconfig.json      # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TS
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫:** TypeScript
    
- **–ë–∞–Ω–¥–ª–µ—Ä:** Vite
    
- **UI:** React 19 + React-DOM
    
- **–†–æ—É—Ç–∏–Ω–≥:** react-router-dom
    
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** Zustand (+ persist –¥–ª—è LocalStorage)
    
- **API:** Fetch
    
- **–ú–æ–¥–∞–ª–∫–∏:** React Portals
    
- **–°—Ç–∏–ª–∏:** CSS Modules
    
- **–õ–∏–Ω—Ç–∏–Ω–≥:** ESLint + Prettier

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
    
   ```bash
   git clone https://github.com/ykrrop/analytics.git
   cd analytics
   npm install
   ```
    
    
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
    
    ```bash
    npm run dev
    ```
    
    - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:5173`
        
    - –í `vite.config.ts` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–∫—Å–∏:
        ```js
        server: {
          proxy: {
            '/aggregate': 'http://localhost:3000',
            '/report':    'http://localhost:3000',
          }
        }
        ```
        
3. **–°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**
    
    ```bash
    npm run build
    ```
    
4. **–ü—Ä–µ–≤—å—é —Å–±–æ—Ä–∫–∏**
    
    ```bash
    npm run preview
    ```
    
5. **–õ–∏–Ω—Ç–∏–Ω–≥**
    ```bash
    npm run lint
    ```
## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –†–æ—É—Ç–∏–Ω–≥ (`App.tsx`)

```tsx
<Router>
  <Routes>
    <Route path="/" element={<Layout />}>
      <Route index element={<AggregatorPage />} />
      <Route path="generator" element={<GeneratorPage />} />
      <Route path="history" element={<HistoryPage />} />
    </Route>
  </Routes>
</Router>
```

- **Layout**: –æ–±—â–∏–π –º–∞–∫–µ—Ç —Å `Header` –∏ `<Outlet />`.
    
- –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: CSV-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –ò—Å—Ç–æ—Ä–∏—è.
    

### 2. CSV-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (`AggregatorPage`)

- **Drag & drop** / –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
    
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `aggregateFile` (—Å—Ç—Ä–∏–º–∏–Ω–≥ –∏–∑ `/aggregate?rows=<n>`)
    
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤ (`ResultSection`)
    
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é
    

### 3. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä (`GeneratorPage`)

- –ö–Ω–æ–ø–∫–∞ ¬´–ù–∞—á–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é¬ª –∑–∞–ø—É—Å–∫–∞–µ—Ç `/report?...`
    
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è `report.csv`
    
- –°—Ç–∞—Ç—É—Å—ã `isLoading`, `isDone`, `error` –≤ —Å—Ç–æ—Ä–µ
    

### 4. –ò—Å—Ç–æ—Ä–∏—è (`HistoryPage`)

- –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –∏–∑ LocalStorage (`useHistoryStore`)
    
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ / –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
    
- –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (`Modal` + `ResultModalContent`)
    

### 5. State-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç

- **aggregatorStore**: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    
- **generatorStore**: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    
- **historyStore**: –º–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
    
- –í—Å–µ —Å—Ç–æ—Ä—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Zustand + `persist` –¥–ª—è LocalStorage
    

### 6. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **CloseButton**, **DoneButton**, **Spinner**, **Header**, **Layout**, **Modal**, **ResultDisplay**, **HistoryEntryItem** –∏ –¥—Ä.
    
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    
- –°—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ CSS Modules
    

### 7. –£—Ç–∏–ª–∏—Ç—ã (`src/utils/format.ts`)

- `formatDate` ‚Üí —Ñ–æ—Ä–º–∞—Ç `DD.MM.YY`
    
- `formatDayOfYear` ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –¥–µ–Ω—å –≤ —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞ `12 –∏—é–Ω—è`
    

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º

- **POST** `/aggregate?rows=<—á–∏—Å–ª–æ>` ‚Äî —Å—Ç—Ä–∏–º–∏–Ω–≥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
    
- **GET** `/report?size=<Gb>&withErrors=<on|off>&maxSpend=<num>` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è CSV
    

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã **Vite**, **TypeScript**, **CSS Modules**
    
- **react-router-dom** –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞
    
- **Zustand** + **persist** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
    
- **Fetch API** –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    
- **React Portals** –¥–ª—è –º–æ–¥–∞–ª–æ–∫
    
- **ESLint + Prettier** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
    
- **–ë–µ–∑ –Ω–µ—É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫**
    
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–∑–∞–π–Ω-–º–∞–∫–µ—Ç–∞–º: –≥–ª–∞–≤–Ω–∞—è, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –∏—Å—Ç–æ—Ä–∏—è, –Ω–∞–≤–∏–≥–∞—Ü–∏—è
    
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: –∑–∞–≥—Ä—É–∑–∫–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –∏—Å—Ç–æ—Ä–∏—è, –º–æ–¥–∞–ª–∫–∏, –æ—á–∏—Å—Ç–∫–∞

